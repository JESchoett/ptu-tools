<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="pokemon" type="com.willstep.ptutools.dataaccess.dto.Pokemon"*/-->
<form id="form" action="#" th:action="'/savePokemonToFile'" th:object="${pokemon}" method="post">
    <div class="char char-pokemon">
        <nav class="navbar navbar-expand-lg navbar-light bg-danger">
            <div class="char-picture navbar-brand">
                <img th:src="'/img/pokemon/'+${pokemon.pokedexEntry.imageFileUrl}"
                     onerror="this.onerror=null; this.src='/img/ptu-exodus-logo-black.png'" />
                <span id="char-picture-shiny" th:class="'material-icons-outlined' + (*{shiny} ? '' : ' d-none')">auto_awesome</span>
            </div>
            <div class="form-inline form-group label-floating">
                <label class="control-label" for="char-name">Name</label>
                <input class="form-control" type="text" id="char-name" th:field="*{name}" required onchange="buildPageTitle()" />
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="material-icons">menu</span>
            </button>
            <div class="collapse navbar-collapse show bg-danger" id="navbarNav">
                <div class="navbar-collapse-header">
                    <div class="row">
                        <div class="col-9 collapse-brand text-dark">
                            PTU Exodus Character Sheet
                        </div>
                        <div class="col-3 collapse-close">
                            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item d-lg-none">
                        <button type="submit" class="nav-link btn btn-outline-danger" href="#">
                            <strong><span class="material-icons-outlined">save</span> Save to File</strong>
                        </button>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#geninfo">General Info</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#health">Health</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#stats">Stats</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#capabilities">Capabilities</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#moves">Moves</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#abilities">Abilities</a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Hidden fields to keep data for save, if present -->
        <input type="hidden" th:field="*{pokemonDocumentId}" />
        <input type="hidden" th:field="*{googleDriveFileId}" />
        <input type="hidden" th:field="*{pokedexEntry.pokedexEntryDocumentId}" />
        <input type="hidden" th:field="*{pokedexEntry.evolutionFamilyDocumentId}" />
        <span id="generatedHiddenFields">
            <!-- Array fields, such as Type and Egg Group, will be tossed here before submitting -->
        </span>

        <!-- Basic info fields -->
        <div class="row row-slim">
            <div class="form-group label-floating col-md-3 col-sm-6 col-12">
                <label class="control-label" for="char-species">Species</label>
                <input class="form-control" type="text" id="char-species" th:field="*{pokedexEntry.species}" />
                <input type="hidden" id="char-pokedexId" th:field="*{pokedexEntry.pokedexEntryDocumentId}">
            </div>
            <div class="form-group label-floating col-md-3 col-sm-6 col-12">
                <label class="control-label" for="char-form">Form</label>
                <input class="form-control" type="text" id="char-form" th:field="*{pokedexEntry.form}" />
            </div>
            <div class="form-group label-floating col-md-2 ml-md-5 col-6">
                <label class="control-label" for="char-level">Level</label>
                <input class="form-control" type="number" id="char-level" th:field="*{level}" />
            </div>
            <div class="form-group label-floating col-md-2 col-6">
                <label class="control-label" for="char-exp">EXP</label>
                <input class="form-control" type="number" id="char-exp" th:field="*{exp}" onchange="onChangeExp(this)" />
            </div>
            <div class="dropdown">
                <button type="button" class="btn btn-outline-danger btn-save ml-md-5 mt-md-2 d-none d-lg-inline-block dropdown-toggle"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="material-icons-outlined">save</span>
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#" onclick="$('#form').submit()">Save to Computer</a>
                    <a class="dropdown-item" href="#" onclick="onClickSaveToGoogleDrive()">Upload to Google Drive</a>
                </div>
            </div>

        </div>
        <div class="row">
            <section id="geninfo" class="col-12 col-lg-6">
                <div class="char-section-title">
                    <h2>General Info</h2>
                    <hr/>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-sm-8">
                        <label class="control-label" for="char-types">Types</label>
                        <input class="form-control" type="text" id="char-types" th:value="${#strings.listJoin(pokemon.pokedexEntry.types,',')}" name="pokedexEntry.types" />
                    </div>
                    <div class="form-group col-sm-4">
                        <button type="button" class="btn btn-outline-danger btn-form" onclick="if (buildTypeEffectivity()) $('#typeEffectModal').modal('show')">Effectivity</button>
                    </div>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-gender">Gender</label>
                        <input class="form-control" type="text" id="char-gender" th:field="*{gender}" />
                    </div>
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-nature">Nature</label>
                        <select class="form-control" type="text" id="char-nature" onchange="onChangeNature(this)"
                                th:field="*{nature}" th:data-prev="*{nature}">
                            <option th:value="null"></option>
                            <option th:value="'Cuddly'" th:selected="${pokemon.nature} == 'Cuddly'">Cuddly</option>
                            <option th:value="'Distracted'" th:selected="${pokemon.nature} == 'Distracted'">Distracted</option>
                            <option th:value="'Proud'" th:selected="${pokemon.nature} == 'Proud'">Proud</option>
                            <option th:value="'Decisive'" th:selected="${pokemon.nature} == 'Decisive'">Decisive</option>
                            <option th:value="'Patient'" th:selected="${pokemon.nature} == 'Patient'">Patient</option>
                            <option th:value="'Desperate'" th:selected="${pokemon.nature} == 'Desperate'">Desperate</option>
                            <option th:value="'Lonely'" th:selected="${pokemon.nature} == 'Lonely'">Lonely</option>
                            <option th:value="'Adamant'" th:selected="${pokemon.nature} == 'Adamant'">Adamant</option>
                            <option th:value="'Naughty'" th:selected="${pokemon.nature} == 'Naughty'">Naughty</option>
                            <option th:value="'Brave'" th:selected="${pokemon.nature} == 'Brave'">Brave</option>
                            <option th:value="'Stark'" th:selected="${pokemon.nature} == 'Stark'">Stark</option>
                            <option th:value="'Bold'" th:selected="${pokemon.nature} == 'Bold'">Bold</option>
                            <option th:value="'Impish'" th:selected="${pokemon.nature} == 'Impish'">Impish</option>
                            <option th:value="'Lax'" th:selected="${pokemon.nature} == 'Lax'">Lax</option>
                            <option th:value="'Relaxed'" th:selected="${pokemon.nature} == 'Relaxed'">Relaxed</option>
                            <option th:value="'Curious'" th:selected="${pokemon.nature} == 'Curious'">Curious</option>
                            <option th:value="'Modest'" th:selected="${pokemon.nature} == 'Modest'">Modest</option>
                            <option th:value="'Mild'" th:selected="${pokemon.nature} == 'Mild'">Mild</option>
                            <option th:value="'Rash'" th:selected="${pokemon.nature} == 'Rash'">Rash</option>
                            <option th:value="'Quiet'" th:selected="${pokemon.nature} == 'Quiet'">Quiet</option>
                            <option th:value="'Dreamy'" th:selected="${pokemon.nature} == 'Dreamy'">Dreamy</option>
                            <option th:value="'Calm'" th:selected="${pokemon.nature} == 'Calm'">Calm</option>
                            <option th:value="'Gentle'" th:selected="${pokemon.nature} == 'Gentle'">Gentle</option>
                            <option th:value="'Careful'" th:selected="${pokemon.nature} == 'Careful'">Careful</option>
                            <option th:value="'Sassy'" th:selected="${pokemon.nature} == 'Sassy'">Sassy</option>
                            <option th:value="'Skittish'" th:selected="${pokemon.nature} == 'Skittish'">Skittish</option>
                            <option th:value="'Timid'" th:selected="${pokemon.nature} == 'Timid'">Timid</option>
                            <option th:value="'Hasty'" th:selected="${pokemon.nature} == 'Hasty'">Hasty</option>
                            <option th:value="'Jolly'" th:selected="${pokemon.nature} == 'Jolly'">Jolly</option>
                            <option th:value="'Naive'" th:selected="${pokemon.nature} == 'Naive'">Naive</option>
                            <option th:value="'Composed'" th:selected="${pokemon.nature} == 'Composed'">Composed</option>
                            <option th:value="'Hardy'" th:selected="${pokemon.nature} == 'Hardy'">Hardy</option>
                            <option th:value="'Docile'" th:selected="${pokemon.nature} == 'Docile'">Docile</option>
                            <option th:value="'Bashful'" th:selected="${pokemon.nature} == 'Bashful'">Bashful</option>
                            <option th:value="'Quirky'" th:selected="${pokemon.nature} == 'Quirky'">Quirky</option>
                            <option th:value="'Serious'" th:selected="${pokemon.nature} == 'Serious'">Serious</option>
                        </select>
                    </div>
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-size">Size</label>
                        <input class="form-control" type="text" id="char-size" th:field="*{pokedexEntry.size}" />
                    </div>
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-weight">Weight</label>
                        <input class="form-control" type="text" id="char-weight" th:field="*{pokedexEntry.weight}" />
                    </div>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-nature-likes">Likes</label>
                        <input class="form-control" type="text" id="char-nature-likes" disabled />
                    </div>
                    <div class="form-group label-floating col-md-3 col-6">
                        <label class="control-label" for="char-nature-dislikes">Dislikes</label>
                        <input class="form-control" type="text" id="char-nature-dislikes" disabled />
                    </div>
                    <div class="form-group label-floating col-md-6">
                        <label class="control-label" for="char-egg-group">Egg Group</label>
                        <input class="form-control" type="text" id="char-egg-group" th:value="${#strings.listJoin(pokemon.pokedexEntry.eggGroups,',')}" />
                    </div>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-3">
                        <label class="control-label control-label-xs-top-1" for="char-capture-rate">Capture Rate</label>
                        <input class="form-control" type="number" id="char-capture-rate" disabled
                               data-subscribe="char-evolution-remaining,char-afflict,char-level,char-hp-current,char-hp-max,char-injuries,char-shiny,char-legendary"
                               data-subscribe-callback="buildCaptureRate"/>
                    </div>
                    <div class="form-group label-floating col-3">
                        <label class="control-label control-label-xs-top-1" for="char-evolution-remaining">Evolutions Left</label>
                        <input class="form-control" type="number" id="char-evolution-remaining" th:field="*{evolutionsRemaining}" />
                    </div>
                    <div class="form-group label-floating custom-checkbox col-3">
                        <label class="control-label text-nowrap" for="char-legendary">Is Legendary?</label>
                        <input class="form-control custom-control-input" type="checkbox" id="char-legendary" th:field="*{pokedexEntry.legendary}" />
                        <span class="custom-control-label"></span>
                    </div>
                    <div class="form-group label-floating custom-checkbox col-3">
                        <label class="control-label text-nowrap" for="char-shiny">Is Shiny?</label>
                        <input class="form-control custom-control-input" type="checkbox" id="char-shiny"
                               th:field="*{shiny}" onchange="onChangeShiny(this)" />
                        <span class="custom-control-label"></span>
                    </div>
                </div>
            </section>
            <section id="health" class="col-12 col-lg-6">
                <div class="char-section-title">
                    <h2>Health</h2>
                    <hr/>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-md-4 col-6 order-0">
                        <label class="control-label" for="char-hp-current">Current</label>
                        <button type="button" class="btn control-action" onclick="$('#quickDamageModal').modal('show')">
                            <img src="/img/icons/octagram-outline.png">
                        </button>
                        <input class="form-control" type="number" id="char-hp-current" th:field="*{health}" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-1">
                        <label class="control-label" for="char-hp-max-inj">Inj. Max</label>
                        <input class="form-control" type="number" id="char-hp-max-inj" disabled
                               data-subscribe="char-hp-max,char-injuries"
                               data-subscribe-callback="buildValueFromSubscribedFields"
                               data-formula="Math.floor(#0 * (1 - (#1 * 0.1)))" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-2">
                        <label class="control-label" for="char-hp-max">Max</label>
                        <input class="form-control" type="number" id="char-hp-max" disabled
                               data-subscribe="char-level,char-stat-hp-total,char-species"
                               data-subscribe-callback="buildMaxHealth"
                               data-formula="#0 + (#1 * 3) + 10" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-5 order-md-3">
                        <label class="control-label" for="char-dr">DR</label>
                        <input class="form-control" type="number" id="char-dr" th:field="*{dr}" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-4">
                        <label class="control-label" for="char-hp-temp">Temp</label>
                        <input class="form-control" type="number" id="char-hp-temp" th:field="*{thp}" />
                    </div>
                    <div class="form-group label-floating col-md-4 col-6 order-4 order-md-5">
                        <label class="control-label" for="char-injuries">Injuries</label>
                        <input class="form-control" type="number" id="char-injuries" th:field="*{injuries}" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-6">
                        <label class="control-label" for="char-hp-max-half">1/2</label>
                        <input class="form-control" type="number" id="char-hp-max-half" disabled
                               data-subscribe="char-hp-max"
                               data-subscribe-callback="buildValueFromSubscribedFields"
                               data-formula="Math.round(#0 / 2)" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-7">
                        <label class="control-label" for="char-hp-max-third">1/3</label>
                        <input class="form-control" type="number" id="char-hp-max-third" disabled
                               data-subscribe="char-hp-max"
                               data-subscribe-callback="buildValueFromSubscribedFields"
                               data-formula="Math.round(#0 / 3)" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-8">
                        <label class="control-label" for="char-max-quarter">1/4</label>
                        <input class="form-control" type="number" id="char-max-quarter" disabled
                               data-subscribe="char-hp-max"
                               data-subscribe-callback="buildValueFromSubscribedFields"
                               data-formula="Math.round(#0 / 4)" />
                    </div>
                    <div class="form-group label-floating col-md-2 col-3 order-9">
                        <label class="control-label" for="char-hp-tick">Tick</label>
                        <input class="form-control" type="number" id="char-hp-tick" disabled
                               data-subscribe="char-hp-max"
                               data-subscribe-callback="buildValueFromSubscribedFields"
                               data-formula="Math.floor(#0 / 10)" />
                    </div>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-sm-12">
                        <label class="control-label" for="char-afflict">Afflictions</label>
                        <input class="form-control" type="text" id="char-afflict" th:field="*{afflictions}" />
                    </div>
                </div>
                <div class="row row-slim">
                    <div class="form-group label-floating col-sm-12">
                        <label class="control-label" for="char-buff">Buffs</label>
                        <input class="form-control" type="text" id="char-buff" th:field="*{buffs}" />
                    </div>
                </div>
            </section>
        </div>
        <div class="row">
            <div class="col-12 col-lg-6">
                <section id="stats">
                    <div class="char-section-title">
                        <h2>Stats</h2>
                        <hr/>
                    </div>
                    <div class="form-table">
                        <table>
                            <thead>
                            <tr>
                                <th>Stat</th>
                                <th>Base</th>
                                <th>Bonus</th>
                                <th>Lvl. Up</th>
                                <th>CS</th>
                                <th>Total</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>HP</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-hp-base" th:field="*{hp.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-hp-bonus" th:field="*{hp.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-hp-lvlup" th:field="*{hp.lvlUp}" />
                                </td>
                                <td class="form-group"></td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-hp-total"
                                           data-subscribe="char-stat-hp-base,char-stat-hp-bonus,char-stat-hp-lvlup"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="#0 + #1 + #2"
                                           disabled />
                                </td>
                            </tr>
                            <tr>
                                <td>Attack</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-atk-base" th:field="*{atk.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-atk-bonus" th:field="*{atk.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-atk-lvlup" th:field="*{atk.lvlUp}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-atk-cs" min="-6" max="6" th:field="*{atk.cs}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-atk-total"
                                           data-subscribe="char-stat-atk-base,char-stat-atk-bonus,char-stat-atk-lvlup,char-stat-atk-cs"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="Math.floor((#0 + #1 + #2) * getCsModifier(#3))"
                                           disabled />
                                </td>
                            </tr>
                            <tr>
                                <td>Defense</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-def-base" th:field="*{def.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-def-bonus" th:field="*{def.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-def-lvlup" th:field="*{def.lvlUp}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-def-cs" min="-6" max="6" th:field="*{def.cs}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-def-total"
                                           data-subscribe="char-stat-def-base,char-stat-def-bonus,char-stat-def-lvlup,char-stat-def-cs"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="Math.floor((#0 + #1 + #2) * getCsModifier(#3))"
                                           disabled />
                                </td>
                            </tr>
                            <tr>
                                <td>Sp. Atk.</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spatk-base" th:field="*{spatk.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spatk-bonus" th:field="*{spatk.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spatk-lvlup" th:field="*{spatk.lvlUp}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spatk-cs" min="-6" max="6" th:field="*{spatk.cs}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spatk-total"
                                           data-subscribe="char-stat-spatk-base,char-stat-spatk-bonus,char-stat-spatk-lvlup,char-stat-spatk-cs"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="Math.floor((#0 + #1 + #2) * getCsModifier(#3))"
                                           disabled />
                                </td>
                            </tr>
                            <tr>
                                <td>Sp. Def.</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spdef-base" th:field="*{spdef.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spdef-bonus" th:field="*{spdef.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spdef-lvlup" th:field="*{spdef.lvlUp}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spdef-cs" min="-6" max="6" th:field="*{spdef.cs}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spdef-total"
                                           data-subscribe="char-stat-spdef-base,char-stat-spdef-bonus,char-stat-spdef-lvlup,char-stat-spdef-cs"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="Math.floor((#0 + #1 + #2) * getCsModifier(#3))"
                                           disabled />
                                </td>
                            </tr>
                            <tr>
                                <td>Speed</td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spd-base" th:field="*{spd.base}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spd-bonus" th:field="*{spd.add}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spd-lvlup" th:field="*{spd.lvlUp}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spd-cs" min="-6" max="6" th:field="*{spd.cs}" />
                                </td>
                                <td class="form-group">
                                    <input class="form-control border-none" type="number" id="char-stat-spd-total"
                                           data-subscribe="char-stat-spd-base,char-stat-spd-bonus,char-stat-spd-lvlup,char-stat-spd-cs"
                                           data-subscribe-callback="buildValueFromSubscribedFields"
                                           data-formula="Math.floor((#0 + #1 + #2) * getCsModifier(#3))"
                                           disabled />
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row row-slim mt-3">
                        <div class="col-sm-4 col-9"><label for="char-stat-lvlup-remaining"><strong>Lvl. Up Points:</strong></label></div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-stat-lvlup-remaining" disabled
                                   data-subscribe="char-level,char-stat-hp-lvlup,char-stat-atk-lvlup,char-stat-def-lvlup,char-stat-spatk-lvlup,char-stat-spdef-lvlup,char-stat-spd-lvlup"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="#0 + 10 - #1 - #2 - #3 - #4 - #5 - #6" />
                        </div>
                    </div>
                    <div class="row row-slim mt-3">
                        <div class="col-sm-4"><label for="char-evd-physical-total"><strong>Physical Evasion:</strong></label></div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-physical-base" alt="Base" disabled
                                   data-subscribe="char-stat-def-total"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.max(-6, Math.min(6, Math.floor(#0 / 5)))" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> + </div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-physical-add" alt="Add" max="9" th:field="*{evasionPhysicalBonus}" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> = </div>
                        <div class="col-sm-2 col-4">
                            <input class="form-control form-control-sm" type="number" id="char-evd-physical-total" alt="Total" value="3" disabled
                                   data-subscribe="char-evd-physical-base,char-evd-physical-add"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.min(9, #0 + #1)" /> <!-- Core 1.05 p234 -->
                        </div>
                    </div>
                    <div class="row row-slim">
                        <div class="col-sm-4"><label for="char-evd-special-total"><strong>Special Evasion:</strong></label></div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-special-base" alt="Base" value="3" disabled
                                   data-subscribe="char-stat-spdef-total"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.max(-6, Math.min(6, Math.floor(#0 / 5)))" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> + </div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-special-add" alt="Add" max="9" th:field="*{evasionSpecialBonus}" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> = </div>
                        <div class="col-sm-2 col-4">
                            <input class="form-control form-control-sm" type="number" id="char-evd-special-total" alt="Total" value="3" disabled
                                   data-subscribe="char-evd-special-base,char-evd-special-add"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.min(9, #0 + #1)" /> <!-- Core 1.05 p234 -->
                        </div>
                    </div>
                    <div class="row row-slim">
                        <div class="col-sm-4"><label for="char-evd-speed-total"><strong>Speed Evasion:</strong></label></div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-speed-base" alt="Base" value="3" disabled
                                   data-subscribe="char-stat-spd-total"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.max(-6, Math.min(6, Math.floor(#0 / 5)))" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> + </div>
                        <div class="col-sm-2 col-3">
                            <input class="form-control form-control-sm" type="number" id="char-evd-speed-add" alt="Add" max="9" th:field="*{evasionSpeedBonus}" />
                        </div>
                        <div class="col-sm-1 col-1 text-center"> = </div>
                        <div class="col-sm-2 col-4">
                            <input class="form-control form-control-sm" type="number" id="char-evd-speed-total" alt="Total" value="3" disabled
                                   data-subscribe="char-evd-speed-base,char-evd-speed-add"
                                   data-subscribe-callback="buildValueFromSubscribedFields"
                                   data-formula="Math.min(9, #0 + #1)" /> <!-- Core 1.05 p234 -->
                        </div>
                    </div>
                </section>
                <section id="moves">
                    <div class="char-section-title mt-4">
                        <h2>Moves</h2>
                        <hr/>
                    </div>
                    <div class="row row-slim" id="moves-list">
                        <div class="form-table form-move col-sm-12 mt-3" th:each="move, iStat: *{moves}" th:id="'move-' + ${iStat.index}">
                            <div th:replace="fragments/characterFormFragments :: move(move = ${move}, index = ${iStat.index})"></div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline-danger mt-3" onclick="onClickAddMove()">Add Blank Move</button>
                    <button type="button" class="btn btn-outline-danger mt-3" onclick="onClickAddMoveByName()">Add Move By Name</button>
                </section>
            </div>
            <div class="col-12 col-lg-6">
                <section id="capabilities">
                    <div class="char-section-title">
                        <h2>Capabilities</h2>
                        <hr/>
                    </div>
                    <div class="row row-slim">
                        <div class="col-sm-4"><label for="char-capble-overland"><strong>Overland:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-overland" th:field="*{pokedexEntry.capabilities['Overland']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-burrow"><strong>Burrow:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-burrow" th:field="*{pokedexEntry.capabilities['Burrow']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-swim"><strong>Swim:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-swim" th:field="*{pokedexEntry.capabilities['Swim']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-high"><strong>High Jump:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-high" th:field="*{pokedexEntry.capabilities['High Jump']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-sky"><strong>Sky:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-sky" th:field="*{pokedexEntry.capabilities['Sky']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-long"><strong>Long Jump:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-long" th:field="*{pokedexEntry.capabilities['Long Jump']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-levitate"><strong>Levitate:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-levitate" th:field="*{pokedexEntry.capabilities['Levitate']}" />
                        </div>
                        <div class="col-sm-4"><label for="char-capble-power"><strong>Power:</strong></label></div>
                        <div class="col-sm-2">
                            <input class="form-control form-control-sm" type="number" id="char-capble-power" th:field="*{pokedexEntry.capabilities['Power']}" />
                        </div>
                    </div>
                    <div class="row row-slim">
                        <div class="form-group label-floating col-sm-12">
                            <label class="control-label" for="char-capble-other">Other Capabilities</label>
                            <input class="form-control" type="text" id="char-capble-other" th:field="*{pokedexEntry.otherCapabilities}" />
                        </div>
                    </div>
                </section>
                <section id="skills">
                    <div class="char-section-title">
                        <h2>Skills</h2>
                        <hr/>
                    </div>
                    <div class="row row-slim">
                        <div class="col-md-6">
                            <div class="form-table">
                                <table>
                                    <thead>
                                    <tr>
                                        <th colspan="2">Body Skills</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Acrobatics</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-acrobatics" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['acrobatics']}"
                                                   th:value="*{pokedexEntry.skills['acrobatics']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Athletics</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-athletics" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['athletics']}"
                                                   th:value="*{pokedexEntry.skills['athletics']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Combat</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-combat" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['combat']}"
                                                   th:value="*{pokedexEntry.skills['combat']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Intimidate</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-intimidate" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['intimidate']}"
                                                   th:value="*{pokedexEntry.skills['intimidate']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Stealth</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-stealth" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['stealth']}"
                                                   th:value="*{pokedexEntry.skills['stealth']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Survival</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-survival" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['survival']}"
                                                   th:value="*{pokedexEntry.skills['survival']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-table">
                                <table>
                                    <thead>
                                    <tr>
                                        <th colspan="2">Mind Skills</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Gen. Ed</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-generalEdu" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['generalEdu']}"
                                                   th:value="*{pokedexEntry.skills['generalEdu']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Med. Ed</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-medicineEdu" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['medicineEdu']}"
                                                   th:value="*{pokedexEntry.skills['medicineEdu']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Occult Ed</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-occultEdu" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['occultEdu']}"
                                                   th:value="*{pokedexEntry.skills['occultEdu']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Poke. Ed</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-pokemonEdu" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['pokemonEdu']}"
                                                   th:value="*{pokedexEntry.skills['pokemonEdu']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Tech Ed</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-techEdu" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['techEdu']}"
                                                   th:value="*{pokedexEntry.skills['techEdu']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Perception</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-perception" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['perception']}"
                                                   th:value="*{pokedexEntry.skills['perception']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6 mt-md-3">
                            <div class="form-table">
                                <table>
                                    <thead>
                                    <tr>
                                        <th colspan="2">Spirit Skills</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Guile</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-guile" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['guile']}"
                                                   th:value="*{pokedexEntry.skills['guile']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Charm</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-charm" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['charm']}"
                                                   th:value="*{pokedexEntry.skills['charm']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Command</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-command" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['command']}"
                                                   th:value="*{pokedexEntry.skills['command']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Focus</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-focus" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['focus']}"
                                                   th:value="*{pokedexEntry.skills['focus']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Intuition</td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text"
                                                   id="char-intuition" alt="Number of Die" min="1" max="6"
                                                   th:field="*{pokedexEntry.skills['intuition']}"
                                                   th:value="*{pokedexEntry.skills['intuition']} ?: '2d6+0'" />
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                </section>

                <section id="abilities">
                    <div class="char-section-title mt-4">
                        <h2>Abilities</h2>
                        <hr/>
                    </div>
                    <div class="row row-slim" id="abilities-list">
                        <div class="form-table form-ability col-sm-12 mt-3" th:each="ability, iStat: *{abilities}" th:id="'ability-' + ${iStat.index}">
                            <div th:replace="fragments/characterFormFragments :: ability(ability = ${ability}, index = ${iStat.index})"></div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline-danger mt-3" onclick="onClickAddAbility()">Add Blank Ability</button>
                    <button type="button" class="btn btn-outline-danger mt-3" onclick="onClickAddAbilityByName()">Add Ability By Name</button>
                </section>
            </div>
        </div>
    </div>
</form>

<!-- Type Effectivity Modal -->
<div class="modal fade" id="typeEffectModal" tabindex="-1" aria-labelledby="typeEffectModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h5 class="modal-title" id="typeEffectModalLabel">Type Effectivity</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-dark text-center" id="typeEffectModalBody">
                <div class="text-center">
                    <img src="/img/loading-pokedie.gif" alt="Loading" style="height: 300px"/>
                </div>
            </div>
            <div class="modal-footer bg-dark">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Quick Damage Modal -->
<div class="modal fade" id="quickDamageModal" tabindex="-1" aria-labelledby="quickDamageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h5 class="modal-title" id="quickDamageModalLabel">Take Damage</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-dark">
                <form onsubmit="onSubmitDamage(); return false">
                    <div class="row row-slim">
                        <div class="form-group label-floating col-sm-6 ml-auto mr-auto">
                            <label class="control-label" for="quickDamage-damage">Amount</label>
                            <input class="form-control" type="number" id="quickDamage-damage" required />
                        </div>
                    </div>
                    <div class="row row-slim">
                        <div class="form-group label-floating col-sm-6">
                            <label class="control-label" for="quickDamage-type">Type</label>
                            <select class="form-control" id="quickDamage-type">
                                <option>Typeless</option>
                                <option>Normal</option>
                                <option>Fire</option>
                                <option>Water</option>
                                <option>Grass</option>
                                <option>Electric</option>
                                <option>Ice</option>
                                <option>Fighting</option>
                                <option>Poison</option>
                                <option>Ground</option>
                                <option>Flying</option>
                                <option>Psychic</option>
                                <option>Bug</option>
                                <option>Rock</option>
                                <option>Ghost</option>
                                <option>Dark</option>
                                <option>Dragon</option>
                                <option>Steel</option>
                                <option>Fairy</option>
                            </select>
                        </div>
                        <div class="form-group label-floating col-sm-6">
                            <label class="control-label" for="quickDamage-class">Class</label>
                            <select class="form-control" id="quickDamage-class">
                                <option>True</option>
                                <option>Physical</option>
                                <option>Special</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer bg-dark">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-danger" data-dismiss="modal" onclick="onSubmitDamage()">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Level Up Modal -->
<div class="modal fade" id="levelUpModal" tabindex="-1" aria-labelledby="levelUpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger">
                <h5 class="modal-title text-center text-white" id="levelUpModalLabel">
                    Learn New Moves
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-dark text-center" id="levelUpModal-body"></div>
            <div class="modal-footer bg-dark">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</html>